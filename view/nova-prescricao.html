<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nova Prescri√ß√£o - PetHosp</title>
    <link rel="stylesheet" href="../CSS/nova-prescricao.css" />
  </head>
  <body>
    <main class="login-card card">
      <aside class="sidebar">
        <h3>Servi√ßos</h3>
        <ul id="listaServicos">
          <li onclick="window.location.href='home.html'">Dashboard</li>
          <li onclick="window.location.href='agenda.html'">Agenda</li>
          <li onclick="window.location.href='recepcao.html'">Recep√ß√£o</li>
          <li onclick="window.location.href='tutores.html'">Tutores</li>
          <li onclick="window.location.href='animais.html'">Animais</li>
          <li onclick="window.location.href='internacao.html'">Interna√ß√£o</li>
          <li onclick="window.location.href='vacinas.html'">Vacinas</li>
        </ul>
      </aside>

      <section class="content-area">
        <button id="menuBtn" class="menu-btn" aria-label="Abrir menu">‚ò∞</button>
        <div id="conteudoServico">
          <article>
            <h2>Nova Prescri√ß√£o</h2>

            <!-- Header din√¢mico (preenchido por shared.js) -->
            <div class="atendimento-header">
              <div class="header-main header-row">
                <div class="avatar-container">
                  <img
                    id="headerAnimalFoto"
                    src=""
                    alt="Foto"
                    class="avatar-img"
                  />
                  <span
                    id="headerAnimalFotoPlaceholder"
                    class="avatar-placeholder"
                    >üêæ</span
                  >
                </div>
                <div class="animal-info-col">
                  <div class="animal-name-row">
                    <h2 id="headerAnimalNome" class="animal-highlight">
                      Nome do Animal
                    </h2>
                  </div>
                  <span id="headerAnimalIdade" class="animal-age"
                    >Idade: --</span
                  >
                </div>
              </div>
              <div class="queixa-container">
                <span class="queixa-label">Queixa:</span>
                <span id="headerQueixa" class="queixa-value">--</span>
              </div>
              <div class="header-info-grid">
                <div class="info-item">
                  <span class="label">Tutor</span>
                  <span class="value" id="headerTutor">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Tel.</span>
                  <span class="value" id="headerTelefone">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Ra√ßa</span>
                  <span class="value" id="headerRaca">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Sexo</span>
                  <span class="value" id="headerSexo">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Porte</span>
                  <span class="value" id="headerPorte">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Reprod.</span>
                  <span class="value" id="headerReprodutiva">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Peso</span>
                  <span class="value"><span id="headerPeso">--</span> kg</span>
                </div>
                <div class="info-item">
                  <span class="label">Temp.</span>
                  <span class="value"><span id="headerTemp">--</span> ¬∞C</span>
                </div>
                <div class="info-item">
                  <span class="label">FC</span>
                  <span class="value"><span id="headerFC">--</span> bpm</span>
                </div>
                <div class="info-item">
                  <span class="label">FR</span>
                  <span class="value"><span id="headerFR">--</span> mpm</span>
                </div>
                <div class="info-item">
                  <span class="label">TPC</span>
                  <span class="value"><span id="headerTPC">--</span> seg</span>
                </div>
                <div class="info-item">
                  <span class="label">Mucosas</span>
                  <span class="value" id="headerMucosas">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Hidrata√ß√£o</span>
                  <span class="value" id="headerHidratacao">--</span>
                </div>
                <div class="info-item">
                  <span class="label">Consci√™ncia</span>
                  <span class="value" id="headerConsciencia">--</span>
                </div>
                <div class="info-item alert-item">
                  <span class="label">Alergias</span>
                  <span id="headerAlergias" style="display: none"></span>
                  <button
                    type="button"
                    class="btn-ver-alergias"
                    id="btnOpenAlergiasHeader"
                  >
                    VER ALERGIAS
                  </button>
                </div>
              </div>
            </div>

            <form id="formPrescricao">
              <h3>Medicamentos</h3>

              <div class="kits-section">
                <h4>Modelos / Kits</h4>
                <div class="kits-controls">
                  <select id="selectKit" class="form-control">
                    <option value="">Selecione um modelo...</option>
                  </select>
                  <button
                    type="button"
                    id="btnCarregarKit"
                    class="btn btn-neutral"
                  >
                    Carregar
                  </button>
                  <button
                    type="button"
                    id="btnSalvarKit"
                    class="btn btn-secondary"
                  >
                    Salvar Atual como Kit
                  </button>
                  <button
                    type="button"
                    id="btnExcluirKit"
                    class="btn btn-danger"
                    title="Excluir Modelo"
                  >
                    üóëÔ∏è
                  </button>
                </div>
              </div>

              <div id="medicamentos-container"></div>

              <button
                type="button"
                id="btnAddMedicamento"
                class="btn btn-secondary"
              >
                + Adicionar Medicamento
              </button>

              <div class="form-group">
                <label for="observacoes">Observa√ß√µes / Recomenda√ß√µes</label>
                <textarea
                  id="observacoes"
                  placeholder="Digite observa√ß√µes adicionais..."
                ></textarea>
              </div>

              <div class="form-actions-row">
                <button type="submit" class="btn btn-primary">
                  Salvar Prescri√ß√£o
                </button>
                <button
                  type="button"
                  id="btnImprimirReceita"
                  class="btn btn-neutral"
                >
                  Imprimir Receita
                </button>
                <button
                  type="button"
                  class="btn btn-neutral"
                  onclick="history.back()"
                >
                  Cancelar
                </button>
              </div>
            </form>
          </article>
        </div>
      </section>
    </main>

    <!-- Template da Linha de Medicamento -->
    <template id="medicamento-template">
      <div class="medicamento-wrapper">
        <div class="medicamento-row">
          <div class="form-group med-name-group">
            <label>Medicamento</label>
            <input
              type="text"
              name="nome"
              class="form-control"
              required
              placeholder="Nome do f√°rmaco"
            />
          </div>
          <div class="form-group med-info-group">
            <label>Dose</label>
            <div class="med-dose-container">
              <input
                type="number"
                name="dose_valor"
                class="form-control"
                placeholder="Qtd"
                step="any"
              />
              <select name="dose_unidade" class="form-control">
                <option value="cp">cp</option>
                <option value="ml">ml</option>
                <option value="gotas">gotas</option>
                <option value="frasco">frasco</option>
                <option value="amp">amp</option>
                <option value="mg">mg</option>
                <option value="g">g</option>
                <option value="mcg">mcg</option>
                <option value="UI">UI</option>
              </select>
            </div>
          </div>
          <div class="form-group med-info-group">
            <label>Intervalo</label>
            <select name="intervalo" class="form-control">
              <option value="">Selecione...</option>
              <option value="6h / 6h">6h / 6h</option>
              <option value="8h / 8h">8h / 8h</option>
              <option value="12h / 12h">12h / 12h</option>
              <option value="24h / 24h">24h / 24h</option>
              <option value="Dose √∫nica">Dose √∫nica</option>
              <option value="Outro">Outro</option>
            </select>
            <input
              type="text"
              name="intervalo_custom"
              class="form-control"
              style="display: none; margin-top: 5px"
              placeholder="Digite o intervalo"
            />
          </div>
          <div class="form-group med-info-group">
            <label>Dura√ß√£o</label>
            <input
              type="text"
              name="duracao"
              class="form-control"
              placeholder="Ex: 5 dias"
            />
          </div>
          <button type="button" class="btn-remove-item" title="Remover">
            üóëÔ∏è
          </button>
        </div>
        <div class="justificativa-alergia">
          <label class="justificativa-label">
            ‚ö†Ô∏è ALERTA: Paciente al√©rgico a este medicamento. Justificativa
            obrigat√≥ria:
          </label>
          <input
            type="text"
            name="justificativa"
            class="form-control justificativa-input"
            placeholder="Justifique clinicamente o uso..."
          />
        </div>
      </div>
    </template>

    <script src="../JS/session-auth.js"></script>
    <script src="../JS/shared.js"></script>
    <script src="../JS/nova-prescricao.js"></script>
  </body>
</html>
